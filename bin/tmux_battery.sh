#!/usr/bin/env bash
out=$(pmset -g batt)
percent=$(echo $out | grep -o "1\?[0-9]\?[0-9]%")
remaining=$(echo $out | grep -o "[0-9]\+:[0-9]\+ remaining" | cut -d" " -f1)

remaining="$(echo $remaining | tr ':' 'h')m"
(( 90 <= ${percent::-1} )) && echo "#[bg=#558386,fg=#ebdbb2,bold]  " || true
(( 80 <= ${percent::-1} & ${percent::-1} < 90 )) && echo "#[bg=#6b9378,fg=#ebdbb2,bold]  " || true
(( 70 <= ${percent::-1} & ${percent::-1} < 80 )) && echo "#[bg=#879a69,fg=color236,bold]  " || true
(( 60 <= ${percent::-1} & ${percent::-1} < 70 )) && echo "#[bg=#a99c53,fg=color236,bold]  " || true
(( 50 <= ${percent::-1} & ${percent::-1} < 60 )) && echo "#[bg=#ce9c34,fg=color236,bold]  " || true
(( 40 <= ${percent::-1} & ${percent::-1} < 50 )) && echo "#[bg=#cb8b33,fg=color236,bold] $remaining " || true
(( 30 <= ${percent::-1} & ${percent::-1} < 40 )) && echo "#[bg=#c97b32,fg=color236,bold] $remaining " || true
(( 20 <= ${percent::-1} & ${percent::-1} < 30 )) && echo "#[bg=#c35d2e,fg=#ebdbb2,bold] $remaining " || true
(( ${percent::-1} < 20 )) && echo "#[bg=#bb362a,fg=#ebdbb2,bold] $remaining " || true

# Colors generated by:
# https://leonardocolor.io/scales.html#
